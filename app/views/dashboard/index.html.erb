<center>
  <div id="myCarousel" class="carousel slide">
    <div class="carousel-inner">
      <% @all_images.each_with_index do |image, i| %>
        <% if i == 0 %>
          <div class="active item">
            <%= image_tag image, :class => "div-carousel-image" %>
          </div>
        <% else %>
          <div class="item">
            <%= image_tag image, :class => "div-carousel-image" %>
          </div>
        <% end %>
      <% end %>
    </div>

    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
  </div>
</center>

<div class="row-fluid">
  <% @all_images.each_with_index do |image, i| %>
    <div class="span1 image-thumbnail" data-imageid="<%= i %>">
      <%= image_tag image, :class => "div-image" %>
    </div>
  <% end %>
</div>

<script>
  $(document).ready(function(){
    $(".carousel").carousel({
      interval: false,
    });
    
    //left and right arrow keys to move the carousel
    $(document).keydown(function(e) {
      if(e.which == 37){
        $(".carousel").carousel('prev');
      }
      if(e.which == 39){
        $(".carousel").carousel('next');
      }
    });
    
    $(".image-thumbnail").on("click", function(){
      $(".carousel").carousel($(this).data("imageid"));
    });
  });
</script>
